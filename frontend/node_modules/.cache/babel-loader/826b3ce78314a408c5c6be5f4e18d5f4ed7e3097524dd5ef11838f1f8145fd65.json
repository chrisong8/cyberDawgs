{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/chris/cyberDawgs/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/chris/cyberDawgs/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/chris/cyberDawgs/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/chris/cyberDawgs/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';// Provides action functions for bot to render responses to user input\nimport{jsx as _jsx}from\"react/jsx-runtime\";var ActionProvider=function ActionProvider(_ref){var createChatBotMessage=_ref.createChatBotMessage,setState=_ref.setState,children=_ref.children;// handles simple \"hello\" message\nvar handleHello=function handleHello(){var botMessage=createChatBotMessage('Hello. Nice to meet you.');setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{messages:[].concat(_toConsumableArray(prev.messages),[botMessage])});});};// handles questions about NIST CSF thru NLP model\nvar nlp=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(message){var url,answer,response,botMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url='http://127.0.0.1:5000/api';console.log(JSON.stringify(message));answer=\"Sorry try again\";_context.prev=3;_context.next=6;return fetch(url,{method:'POST',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'},body:JSON.stringify(message)}).then(function(response){if(response.ok){return response.text();}}).then(function(text){answer=createChatBotMessage(text);}).catch(function(error){console.error(\"Error with fetch\"+error);});case 6:response=_context.sent;_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);console.error(\"FETCH: \".concat(_context.t0));case 12:botMessage=answer;setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{messages:[].concat(_toConsumableArray(prev.messages),[botMessage])});});case 14:case\"end\":return _context.stop();}},_callee,null,[[3,9]]);}));return function nlp(_x){return _ref2.apply(this,arguments);};}();// Can filter blank or inappropriate user input\nvar idk=function idk(){var response='I am not sure how to answer that question... try again?';var botMessage=createChatBotMessage(response);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{messages:[].concat(_toConsumableArray(prev.messages),[botMessage])});});};// Return all actions\nreturn/*#__PURE__*/_jsx(\"div\",{children:React.Children.map(children,function(child){return/*#__PURE__*/React.cloneElement(child,{actions:{handleHello:handleHello,nlp:nlp,idk:idk}});})});};export default ActionProvider;","map":{"version":3,"names":["React","jsx","_jsx","ActionProvider","_ref","createChatBotMessage","setState","children","handleHello","botMessage","prev","_objectSpread","messages","concat","_toConsumableArray","nlp","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","message","url","answer","response","wrap","_callee$","_context","next","console","log","JSON","stringify","fetch","method","headers","body","then","ok","text","catch","error","sent","t0","stop","_x","apply","arguments","idk","Children","map","child","cloneElement","actions"],"sources":["C:/Users/chris/cyberDawgs/frontend/src/chatbot/ActionProvider.jsx"],"sourcesContent":["import React from 'react';\r\n\r\n// Provides action functions for bot to render responses to user input\r\nconst ActionProvider = ({ createChatBotMessage, setState, children }) => {\r\n  // handles simple \"hello\" message\r\n    const handleHello = () => {\r\n        const botMessage = createChatBotMessage('Hello. Nice to meet you.');\r\n    \r\n        setState((prev) => ({\r\n          ...prev,\r\n          messages: [...prev.messages, botMessage],\r\n        }));\r\n    };\r\n\r\n    // handles questions about NIST CSF thru NLP model\r\n    const nlp = async (message) => {\r\n        let url = 'http://127.0.0.1:5000/api';\r\n\r\n        console.log(JSON.stringify(message));\r\n\r\n        let answer = \"Sorry try again\"\r\n\r\n        try {\r\n          const response = await fetch(url, {\r\n              method: 'POST',\r\n              headers: {\r\n                  'Access-Control-Allow-Origin': '*',\r\n                  'Content-Type': 'application/json'\r\n              },\r\n              body: JSON.stringify(message)\r\n          }).then((response) => {\r\n              if (response.ok) {\r\n                return response.text()\r\n              }\r\n          }).then(text => {\r\n            answer = createChatBotMessage(text);\r\n          }).catch(error => {\r\n            console.error(\"Error with fetch\" + error);\r\n          });\r\n      } catch (error) {\r\n          console.error(`FETCH: ${error}`);\r\n      }\r\n\r\n      let botMessage = answer;\r\n\r\n        setState((prev) => ({\r\n          ...prev,\r\n          messages: [...prev.messages, botMessage],\r\n        }));\r\n    };\r\n\r\n    // Can filter blank or inappropriate user input\r\n    const idk = () => {\r\n        const response = 'I am not sure how to answer that question... try again?'\r\n\r\n        const botMessage = createChatBotMessage(response);\r\n    \r\n        setState((prev) => ({\r\n          ...prev,\r\n          messages: [...prev.messages, botMessage],\r\n        }));\r\n    };\r\n\r\n  // Return all actions\r\n  return (\r\n    <div>\r\n      {React.Children.map(children, (child) => {\r\n        return React.cloneElement(child, {\r\n          actions: {\r\n            handleHello,\r\n            nlp,\r\n            idk,\r\n          },\r\n        });\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ActionProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}